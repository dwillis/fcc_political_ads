{% extends "fcc-base.html" %}{% load static from staticfiles %}
{% block bodyclass %}broadcasters-featured{% endblock bodyclass %}

{% block content %}
<nav class="subnav">
    <ul class="nav nav-pills">
        <li>
            <a href="#map">Find Stations</a>
        </li>
        <li>
            <a href="#get_involved">Get Involved</a>
        </li>
        <li>
            <a href="#feedback">Questions</a>
        </li>
    </ul>        
</nav>
<section class="row">
    <div class="span8">
        <h2 id='page-intro'>Who’s trying to influence your vote? Help us find out!</h2>
        <p>
            New campaign finance rules mean that the airwaves this election year will be dominated by outside groups, many of whom don’t have to disclose the sources of their funding and don’t even have to register with the Federal Election Commission. But there is one place where they will leave a paper trail: At the TV stations where they buy their ads. For the first time, the Federal Communication Commission (FCC) has ruled to require television stations in the top 50 media markets to put their public and political files online. These files contain information on political ad spending which are crucial to the public interest. But the <a href="http://reporting.sunlightfoundation.com/2012/fcc-ruling-would-exempt-160-markets-posting-requirements/">top 50 media markets cover only a fraction of the swing states</a>, where the majority of political ad spending will occur. We need your help to unlock the rest of the political files and post the information online.
        </p>
 
        <p>
            Sunlight Foundation in partnership with Free Press, New America Foundation and other coalition members are working with our members, volunteers, journalists and allies across the country to inspect political files and post our findings online. As a pilot project, we will focus on Wisconsin’s gubernatorial election on June 5th. <a href="http://act2.freepress.net/sign/public_file_pledge/?source=FPblog">Sign up</a> for a <a href="http://www.freepress.net/how-to-inspect-public-political-files">training</a> or search for a tv station near you.
        </p>        
    </div>
    <div class="span4 sidebar">
        <div class='inner'>
            <h3>Resources</h3>
            <ul class='resources unstyled'>
                <li>
                    <h5>How to inspect public political files</h5>
                    <p>This <a href='http://www.freepress.net/how-to-inspect-public-political-files'>handy how-to guide</a> provides step-by-step information on how to free the files from your local broadcaster. (<a href="http://www.freepress.net/files/publicfiles-howto.pdf">pdf version</a>)</p>
                </li>
                <li>
                    <h5>Public Files Inspection Checklist</h5>
                    <p>Ready to go to the station? <a href='http://www.freepress.net/files/publicfiles-checklist.pdf'>Print this checklist</a> and the <a href='{% static 'files/FCC_public_files_excerpt.pdf' %}'>political files excerpt</a> from FCC’s manual and bring it with you.</p>
                </li>
            </ul>
        </div>
    </div>
</section>
<section id="map" class="row">
    <div class="span12">
        <h2>Find Nearby Stations: {{ state_name }}</h2>    
        <p>Find stations near you! Use this form to search for TV stations within a search radius. This will return a list of stations ordered by distance (as the crow flies). Actual driving distance will vary.</p>
        {% include 'broadcasters/_map_searchform.html' %}
    </div>
    <div class="span8">
        <div id="map-box">
            <div id="map_canvas" style="width:100%; height:100%"></div>
        </div>

    </div>
    <div class="span4">
        <div id="stations">
            <ul id="locations"></ul>
        </div>
        
    </div>
</section>
<div class="row">
    <section id="get_involved" class="span6 span-divider">
        <h2>Get involved!</h2>
        <p>
            <span class="label label-important">EMAIL SHARING DISCLAIMER SHALL GO HERE.</span> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
        <form id='action_signup' class='form-horizontal' action="{% url action_signup %}" method="post" accept-charset="utf-8">
            <fieldset>
            {% csrf_token %}
            <div class="control-group">
                    <label class="control-label">
                        Email: 
                    </label>
                <div class="controls">
                    <input type="email" name="email" value="" placeholder="Email" required="required">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    First Name: 
                </label>
                <div class="controls">
                    <input type="text" name="firstname" value="" placeholder="First Name" id="firstname">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Last Name: 
                </label>
                <div class="controls">
                    <input type="text" name="lastname" value="" id="lastname" placeholder="Last Name">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Phone: 
                </label>
                <div class="controls">
                    <input type="text" name="phone" value="" placeholder="Phone" id="phone">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Callsign: 
                </label>
                <div class="controls">
                    <select name="custom-1093" id="station" size="1"></select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Share with Free Press: 
                </label>
                <div class="controls">
                    <input type="checkbox" name="custom-1116" id="optin" size="1" checked="checked">
                    <p class="help-block">Yes, I would like to receive email alerts from Free Press</p>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input type="submit" class="btn" value="Sign up &rarr;">
                </div>
            </div>
            </fieldset>
        </form>
    </section>
    <section id="feedback" class="span6">
        <h2>Questions, Comments, Etc.</h2>
        <p>Help us make the project better! Errors with the station addresses? Issues at the TV stations? Any questions or comments? Let us know! <span class="label label-important">CONTACT ADDRESS GOES HERE</span></p>
    </section>
</div>
{% endblock content %}

{% block head %}
    {{ block.super }}
    {% include "broadcasters/_googlemaps_script_include.html" %}
{% endblock head %}

{% block js %}
    {{ block.super }}
    <script>
        var startPos = {{ broadcaster_list.0.addresses.1.pos|default:"[0,0]" }};
        var initialLocations = [
            {% for broadcaster in broadcaster_list %}{{ broadcaster.as_json|safe }}{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];
        var userMarker_url = "{% static 'img/sll_map_marker_purple.png' %}";
        var stationMarker_url = "{% static 'img/sll_map_marker_blue.png' %}";
        $(document).ready(function() {
            $('#action_signup').submit(function(event) {
                var theform = $(this);
                var data = theform.serialize();
                jQuery.post("{% url action_signup %}",data, function(resp, textStatus) {
                    var $p = $('<p class="alert alert-success">').text(resp.message).hide();
                    theform.slideUp('fast', function() {
                        theform.after($p);
                        $p.slideDown();
                    });
                });
                event.preventDefault();
                return false;
            });
        });
        
    </script>
    <script src="{% static 'js/map_stations.js' %}" type="text/javascript" charset="utf-8"></script>
{% endblock js %}
